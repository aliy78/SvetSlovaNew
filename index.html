<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Свет Слова</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="assets/icon-192.png">
</head>
<body>
  <h1>📘 Добро пожаловать в Свет Слова</h1>

  <a href="read.html"><button>📖 Читать Библию</button></a>

  <button id="themeToggle">🌙 Темная тема</button>

  <div class="verse-block" id="verseOfTheDay">
    <h2>✨ Стих дня</h2>
    <p class="verse" id="dailyVerse">Загрузка стиха...</p>
    <button id="speakVerseBtn">🔊 Озвучить стих</button>
  </div>

  <script>
    // 🌙 Переключение темы
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      themeToggle.textContent = isDark ? '☀️ Светлая тема' : '🌙 Темная тема';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark');
        themeToggle.textContent = '☀️ Светлая тема';
      }

      // 📖 Загрузка bible.json
      fetch('data/bible.json')
        .then(res => res.json())
        .then(data => {
          const allVerses = [];
          data.Books.forEach(book => {
            book.Chapters.forEach((chapter, chIdx) => {
              chapter.Verses.forEach((v, vIdx) => {
                const verseText = `${book.BookName} ${chIdx + 1}:${v.VerseId || vIdx + 1} — ${v.Text}`;
                allVerses.push(verseText);
              });
            });
          });
          const random = allVerses[Math.floor(Math.random() * allVerses.length)];
          document.getElementById('dailyVerse').textContent = random;
        });
    });

    // 🔊 Озвучка стиха
    document.getElementById('speakVerseBtn').addEventListener('click', () => {
      const verseText = document.getElementById('dailyVerse').textContent;
      const utter = new SpeechSynthesisUtterance(verseText);
      utter.lang = 'ru-RU';
      utter.rate = 1;
      speechSynthesis.speak(utter);
    });
  </script>
</body>
</html>



