<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–≤–µ—Ç –°–ª–æ–≤–∞</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –°–≤–µ—Ç –°–ª–æ–≤–∞</h1>
  <button id="themeToggle">üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞</button>

  <div id="verseOfTheDay" class="verse-block">
    <h2>üìÜ –°—Ç–∏—Ö –¥–Ω—è</h2>
    <p id="dailyVerse">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
  </div>

  <div style="text-align:center; margin-top: 30px;">
    <a href="read.html">
      <button style="font-size:18px; padding:12px 20px;">üìñ –ß–∏—Ç–∞—Ç—å –ë–∏–±–ª–∏—é</button>
    </a>
  </div>

  <script>
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      themeToggle.textContent = isDark ? '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : 'üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark');
        themeToggle.textContent = '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
      }

      // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∏—Ö–∞ –¥–Ω—è
      fetch('data/bible.json')
        .then(response => response.json())
        .then(data => {
          const books = data.Books;
          const randomBookIndex = Math.floor(Math.random() * books.length);
          const book = books[randomBookIndex];

          const chapterIndex = Math.floor(Math.random() * book.Chapters.length);
          const chapter = book.Chapters[chapterIndex];

          const verseIndex = Math.floor(Math.random() * chapter.Verses.length);
          const verseObj = chapter.Verses[verseIndex];

          const verseText = verseObj.Text;
          const verseNumber = verseObj.VerseId || (verseIndex + 1);
          const reference = `${book.BookName} ${chapterIndex + 1}:${verseNumber}`;

          document.getElementById('dailyVerse').textContent = `${reference} ‚Äî ${verseText}`;
        })
        .catch(error => {
          document.getElementById('dailyVerse').textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∏—Ö –¥–Ω—è.';
          console.error(error);
        });
    });
  </script>
</body>
</html>

