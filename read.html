<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–≤–µ—Ç –°–ª–æ–≤–∞</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1>–°–≤–µ—Ç –°–ª–æ–≤–∞</h1>
  <button id="themeToggle">üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞</button>

  <div>
    <label for="bookSelect">–ö–Ω–∏–≥–∞:</label>
    <select id="bookSelect"></select>
  </div>

  <div>
    <label for="chapterSelect">–ì–ª–∞–≤–∞:</label>
    <select id="chapterSelect"></select>
  </div>

  <div id="versesContainer"></div>

  <script>
    const bookSelect = document.getElementById('bookSelect');
    const chapterSelect = document.getElementById('chapterSelect');
    const versesContainer = document.getElementById('versesContainer');
    const themeToggle = document.getElementById('themeToggle');

    let bibleData = {};

    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ë–∏–±–ª–∏–∏
    fetch('data/bible.json')
      .then(response => response.json())
      .then(data => {
        bibleData = data;
        populateBooks();
      })
      .catch(error => {
        versesContainer.innerHTML = '<p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Bible.json</p>';
        console.error(error);
      });

    // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–Ω–∏–≥
    function populateBooks() {
      bookSelect.innerHTML = '';
      bibleData.Books.forEach((book, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = book.BookName;
        bookSelect.appendChild(option);
      });
      populateChapters();
    }

    // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥–ª–∞–≤
    function populateChapters() {
      chapterSelect.innerHTML = '';
      const selectedBook = bibleData.Books[bookSelect.value];
      selectedBook.Chapters.forEach((chapter, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = `–ì–ª–∞–≤–∞ ${index + 1}`;
        chapterSelect.appendChild(option);
      });
      showVerses();
    }

    // –ü–æ–∫–∞–∑ —Å—Ç–∏—Ö–æ–≤
    function showVerses() {
      versesContainer.innerHTML = '';
      const book = bibleData.Books[bookSelect.value];
      const chapter = book.Chapters[chapterSelect.value];
      chapter.Verses.forEach((verse, index) => {
        const p = document.createElement('p');
        p.className = 'verse';
        p.textContent = `${index + 1}. ${verse}`;
        versesContainer.appendChild(p);
      });
    }

    // –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π
    bookSelect.addEventListener('change', populateChapters);
    chapterSelect.addEventListener('change', showVerses);

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      themeToggle.textContent = isDark ? '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : 'üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π —Ç–µ–º—ã
    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark');
        themeToggle.textContent = '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
      }
    });
  </script>
</body>
</html>

