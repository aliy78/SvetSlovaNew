<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–≤–µ—Ç –°–ª–æ–≤–∞ ‚Äî –ß—Ç–µ–Ω–∏–µ</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <h1>üìñ –ß—Ç–µ–Ω–∏–µ –ë–∏–±–ª–∏–∏</h1>
  <button id="themeToggle">üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞</button>

  <div class="selectors">
    <label for="bookSelect">–ö–Ω–∏–≥–∞:</label>
    <select id="bookSelect"></select>

    <label for="chapterSelect">–ì–ª–∞–≤–∞:</label>
    <select id="chapterSelect"></select>
  </div>

  <div id="versesContainer" class="verses-block">
    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–Ω–∏–≥—É –∏ –≥–ª–∞–≤—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç–∏—Ö–∏.</p>
  </div>

  <script>
    let bibleData;
    const bookSelect = document.getElementById('bookSelect');
    const chapterSelect = document.getElementById('chapterSelect');
    const versesContainer = document.getElementById('versesContainer');

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      const isDark = document.body.classList.contains('dark');
      themeToggle.textContent = isDark ? '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : 'üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark');
        themeToggle.textContent = '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
      }

      fetch('data/bible.json')
        .then(response => response.json())
        .then(data => {
          bibleData = data;
          loadBooks();
        })
        .catch(error => {
          versesContainer.innerHTML = '<p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ë–∏–±–ª–∏–∏.</p>';
          console.error(error);
        });
    });

    function loadBooks() {
      bibleData.Books.forEach((book, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = book.BookName;
        bookSelect.appendChild(option);
      });

      bookSelect.addEventListener('change', loadChapters);
    }

    function loadChapters() {
      chapterSelect.innerHTML = '';
      const book = bibleData.Books[bookSelect.value];
      book.Chapters.forEach((chapter, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = `–ì–ª–∞–≤–∞ ${index + 1}`;
        chapterSelect.appendChild(option);
      });

      chapterSelect.addEventListener('change', showVerses);
    }

    function showVerses() {
      versesContainer.innerHTML = '';
      const book = bibleData.Books[bookSelect.value];
      const chapter = book.Chapters[chapterSelect.value];
      chapter.Verses.forEach((verseObj, index) => {
        const p = document.createElement('p');
        p.className = 'verse';
        const verseText = verseObj.Text;
        const verseNumber = verseObj.VerseId || (index + 1);
        p.textContent = `${verseNumber}. ${verseText}`;
        versesContainer.appendChild(p);
      });
    }
  </script>
</body>
</html>


